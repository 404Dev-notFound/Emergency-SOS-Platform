<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RapidResponse - SOS Platform (Classy)</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css"/>
<script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

<style>
  body { font-family: 'Inter', sans-serif; }
  #map { height: 70vh; width: 100%; border-radius: 12px; }
  .leaflet-container { border-radius:12px; }
  .user-marker { display:inline-block; width:16px; height:16px; border-radius:9999px; border:3px solid white; background:#ef4444; box-shadow:0 0 0 0 rgba(239,68,68,0.35); animation:pulseMarker 1.6s infinite ease-out; }
  @keyframes pulseMarker {0%{box-shadow:0 0 0 0 rgba(239,68,68,0.35);transform:scale(1);}70%{box-shadow:0 0 0 18px rgba(239,68,68,0);transform:scale(1.05);}100%{box-shadow:0 0 0 0 rgba(239,68,68,0);transform:scale(1);}}
  .blue-marker { display:inline-block; width:14px; height:14px; border-radius:9999px; background:#3b82f6; border:2px solid white; }
  .toast-container { position:fixed; top:16px; right:16px; z-index:60; display:flex; flex-direction:column; gap:8px; }
  .toast { min-width:220px; padding:10px 14px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.1); font-weight:600; color:white; animation:toastIn 0.3s ease; }
  .toast-success { background: linear-gradient(90deg,#10b981,#059669); }
  .toast-info { background: linear-gradient(90deg,#3b82f6,#2563eb); }
  .toast-error { background: linear-gradient(90deg,#ef4444,#dc2626); }
  @keyframes toastIn {0%{opacity:0; transform:translateY(-20px);}100%{opacity:1;transform:translateY(0);}}
  .glass-header { background: rgba(255,255,255,0.75); backdrop-filter: blur(8px); }
</style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen flex flex-col">

<div id="toastHolder" class="toast-container" aria-live="polite" aria-atomic="true"></div>

<!-- MAIN PAGE -->
<section id="mainPage" class="flex flex-col flex-grow">
<header class="sticky top-0 z-50 glass-header border-b border-gray-200 shadow-sm">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-16">
<div class="flex items-center gap-3"><div class="bg-red-600 p-2 rounded-lg text-white font-bold">‚ö†</div>
<div><h1 class="text-xl font-bold text-gray-900">RapidResponse</h1><p class="text-xs text-gray-500">Emergency SOS Platform</p></div></div>
<button id="signinBtn" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition">üîë Sign In</button>
</div>
</header>

<main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 text-center">
<h2 class="text-4xl font-bold text-gray-900 mb-4">Emergency Response Platform</h2>
<p class="text-xl text-gray-600 mb-8">Connecting people in emergencies with verified responders in real-time</p>

<button id="getStarted" class="inline-flex items-center gap-2 px-8 py-4 bg-red-600 hover:bg-red-700 text-white font-bold text-lg rounded-lg transition animate-pulse">üö® SOS</button>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6 my-12 text-left">
<div id="featureSOS" class="feature-box bg-white rounded-xl shadow-md p-6 border border-gray-200 hover:shadow-lg cursor-pointer">
<div class="bg-red-50 p-3 rounded-lg w-fit mb-4">üö®</div><h3 class="text-lg font-bold mb-2">Instant SOS Alerts</h3><p class="text-gray-600">One-tap emergency alerts with GPS location sharing.</p></div>
<div id="featureMap" class="feature-box bg-white rounded-xl shadow-md p-6 border border-gray-200 hover:shadow-lg cursor-pointer">
<div class="bg-blue-50 p-3 rounded-lg w-fit mb-4">üó∫</div><h3 class="text-lg font-bold mb-2">Real-Time Mapping</h3><p class="text-gray-600">Live tracking of emergencies and responders.</p></div>
<div id="featureVerify" class="feature-box bg-white rounded-xl shadow-md p-6 border border-gray-200 hover:shadow-lg cursor-pointer">
<div class="bg-green-50 p-3 rounded-lg w-fit mb-4">ü§ù</div><h3 class="text-lg font-bold mb-2">Verified Network</h3><p class="text-gray-600">Trusted volunteers, NGOs, and emergency services verified.</p></div>
</div>
</main>

<footer class="bg-white border-t border-gray-200 mt-12">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center text-sm text-gray-600">
RapidResponse - Coordinated disaster response
</div>
</footer>
</section>

<!-- SIGN-IN PAGE -->
<section id="signinPage" class="hidden flex items-center justify-center min-h-screen bg-gray-50 relative">
<div class="absolute top-4 left-8 flex items-center space-x-2 cursor-pointer" id="backHome1">‚¨Ö <span class="font-medium text-gray-600">Back</span></div>
<div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-8 space-y-6">
<h2 class="text-2xl font-bold text-center mb-4">Sign In</h2>
<form id="signinForm" class="space-y-4">
<div><label class="block text-sm font-medium text-gray-700">Email</label>
<input id="signinEmail" type="email" required class="mt-1 w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"/></div>
<div><label class="block text-sm font-medium text-gray-700">Password</label>
<input id="signinPass" type="password" required class="mt-1 w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"/></div>
<div><label class="block text-sm font-medium text-gray-700 mb-1">Attach Valid Govt ID Proof</label>
<input id="idProof" type="file" accept=".jpg,.jpeg,.png,.pdf" class="w-full border border-gray-300 rounded-md p-2"/></div>
<button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-md font-semibold hover:bg-blue-700 transition">Sign In</button>
</form>
</div>
</section>

<!-- SOS PAGE -->
<section id="sosPage" class="hidden flex items-center justify-center min-h-screen bg-gray-100 relative">
<div class="absolute top-4 left-8 flex items-center space-x-2 cursor-pointer" id="backHome2">‚¨Ö <span class="font-medium text-gray-600">Back</span></div>
<div class="bg-white shadow-lg rounded-2xl w-full max-w-md p-6">
<h2 class="text-xl font-semibold text-gray-900 flex items-center gap-2 mb-4">üö® Emergency SOS</h2>
<label class="block text-sm font-medium text-gray-700 mb-1">Emergency Type</label>
<select id="emType" class="w-full border border-gray-300 rounded-lg p-2 mb-4 focus:ring-2 focus:ring-red-500">
<option>Medical</option><option>Safety / Harassment</option><option>Accident</option><option>Natural Disaster</option><option>Fire</option><option>Others</option>
</select>
<label class="block text-sm font-medium text-gray-700 mb-1">Severity</label>
<select id="emSeverity" class="w-full border border-gray-300 rounded-lg p-2 mb-4 focus:ring-2 focus:ring-red-500">
<option>Critical</option><option>High</option><option>Low</option></select>
<label class="block text-sm font-medium text-gray-700 mb-1">Description (Optional)</label>
<textarea id="emDesc" rows="3" class="w-full border border-gray-300 rounded-lg p-2 mb-4 focus:ring-2 focus:ring-red-500 resize-none" placeholder="Briefly describe the emergency..."></textarea>
<div class="flex gap-3">
<button id="sosSendBtn" class="flex-1 bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700 transition">Send SOS Alert</button>
<button id="cancelSOS" class="flex-1 border border-gray-300 text-gray-700 py-2 rounded-lg font-medium hover:bg-gray-100 transition">Cancel</button>
</div>
<p class="text-center text-xs text-gray-500 mt-4">üìç Your location will be shared with nearby responders.</p>
</div>

<!-- SOS Modal -->
<div id="sosModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm">
<div class="bg-white rounded-xl shadow-2xl p-6 max-w-sm w-full text-center">
<h3 class="text-lg font-bold mb-2">Confirm SOS</h3>
<p class="text-sm text-gray-600 mb-4">You're about to send an emergency alert with your current location. Auto-send in <span id="countdown">10</span>s.</p>
<div class="flex gap-3 justify-center mt-2">
<button id="sosCancelModal" class="px-4 py-2 rounded-md border border-gray-300">Cancel</button>
<button id="sosConfirm" class="px-4 py-2 rounded-md bg-red-600 text-white font-semibold">Send Now</button>
</div>
</div>
</div>
</section>

<!-- MAP PAGE -->
<section id="mapPage" class="hidden flex flex-col items-center justify-center min-h-screen bg-gray-50">
<div class="absolute top-4 left-8 flex items-center space-x-2 cursor-pointer" id="backHomeMap">‚¨Ö <span class="font-medium text-gray-600">Back</span></div>
<h2 class="text-2xl font-bold text-gray-800 mb-4 mt-8">Your Live Location & SOS Feed</h2>
<div id="map" class="w-11/12 md:w-3/4 lg:w-2/3 rounded-xl shadow-lg mb-8"></div>
<p class="text-sm text-gray-500 mt-4">üìç Location updates automatically if permissions are granted. Blue = SOS reported by others.</p>
</section>

<script>
// PAGES
const mainPage=document.getElementById('mainPage'),
signinPage=document.getElementById('signinPage'),
sosPage=document.getElementById('sosPage'),
mapPage=document.getElementById('mapPage'),
toastHolder=document.getElementById('toastHolder'),
sosModal=document.getElementById('sosModal'),
countdownEl=document.getElementById('countdown');

function showPage(page){[mainPage,signinPage,sosPage,mapPage].forEach(p=>p.classList.add('hidden')); page.classList.remove('hidden'); page.classList.add('flex');}

// NAV
document.getElementById('signinBtn').onclick=()=>showPage(signinPage);
document.getElementById('getStarted').onclick=()=>showPage(sosPage);
document.getElementById('featureSOS').onclick=()=>showPage(sosPage);
document.getElementById('featureMap').onclick=()=>showPage(mapPage);
document.getElementById('featureVerify').onclick=()=>showPage(mapPage);
document.getElementById('backHome1').onclick=()=>showPage(mainPage);
document.getElementById('backHome2').onclick=()=>showPage(mainPage);
document.getElementById('backHomeMap').onclick=()=>showPage(mainPage);
document.getElementById('cancelSOS').onclick=()=>showPage(mainPage);

// TOAST
function showToast(msg,type='info',duration=3500){const t=document.createElement('div');t.className=`toast toast-${type}`;t.innerText=msg;toastHolder.appendChild(t);setTimeout(()=>t.remove(),duration);}

// SIGN-IN FORM
document.getElementById('signinForm')?.addEventListener('submit',e=>{e.preventDefault(); showToast('Signed in (demo)','success'); showPage(mainPage);});

// MAP & SOS
let map, userMarker, clusterGroup;
let responders=[];
function initMap(){
map=L.map('map').setView([28.6139,77.2090],12); // Delhi
L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19, attribution:'&copy; OSM'}).addTo(map);
clusterGroup=L.markerClusterGroup();
map.addLayer(clusterGroup);

// User marker
userMarker=L.circleMarker([28.6139,77.2090],{radius:12,color:'#ef4444',fillColor:'#ef4444',fillOpacity:1}).addTo(map).bindPopup('You are here');

// Verified responders
for(let i=0;i<15;i++){
let lat=28.6+Math.random()*0.1, lng=77.2+Math.random()*0.1;
let m=L.marker([lat,lng],{icon:L.divIcon({className:'blue-marker'})}).addTo(clusterGroup).bindPopup(`Responder ${i+1}`);
responders.push(m);
}

// Simulated SOS feed every 12s
setInterval(()=>{let lat=28.6+Math.random()*0.1,lng=77.2+Math.random()*0.1;
L.marker([lat,lng],{icon:L.divIcon({className:'blue-marker'})}).addTo(clusterGroup).bindPopup('SOS reported'); showToast('New SOS Alert', 'info');},12000);
}

// SOS Send
document.getElementById('sosSendBtn').onclick=()=>{
sosModal.classList.remove('hidden');
let count=10;
countdownEl.innerText=count;
let interval=setInterval(()=>{
count--;
countdownEl.innerText=count;
if(count<=0){clearInterval(interval); sendSOS(); sosModal.classList.add('hidden');}
},1000);
document.getElementById('sosCancelModal').onclick=()=>{clearInterval(interval); sosModal.classList.add('hidden'); showToast('SOS Cancelled','error');};
document.getElementById('sosConfirm').onclick=()=>{clearInterval(interval); sendSOS(); sosModal.classList.add('hidden');};
};

function sendSOS(){
showToast('SOS Sent!', 'success');
let lat=28.6139+Math.random()*0.02, lng=77.2090+Math.random()*0.02;
L.marker([lat,lng],{icon:L.divIcon({className:'red-pulse'})}).addTo(clusterGroup).bindPopup('Your SOS'); // Add your marker
}

// INIT MAP ON MAP PAGE SHOW
document.getElementById('featureMap').onclick=()=>{showPage(mapPage); if(!map) initMap();}
document.getElementById('featureVerify').onclick=()=>{showPage(mapPage); if(!map) initMap();}
</script>
</body>
</html>
